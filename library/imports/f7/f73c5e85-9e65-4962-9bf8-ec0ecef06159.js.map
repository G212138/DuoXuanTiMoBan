{"version":3,"sources":["assets\\game\\scripts\\UI\\Item\\GameUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { NetWork } from \"../../../../frame/scripts/Http/NetWork\";\r\nimport { ListenerManager } from \"../../../../frame/scripts/Manager/ListenerManager\";\r\nimport { SoundManager } from \"../../../../frame/scripts/Manager/SoundManager\";\r\nimport { SyncDataManager } from \"../../../../frame/scripts/Manager/SyncDataManager\";\r\nimport { T2M } from \"../../../../frame/scripts/SDK/T2M\";\r\nimport { Tools } from \"../../../../frame/scripts/Utils/Tools\";\r\nimport { UIHelp } from \"../../../../frame/scripts/Utils/UIHelp\";\r\nimport { EventType } from \"../../Data/EventType\";\r\nimport { EditorManager, GameData } from \"../../Manager/EditorManager\";\r\nimport OptionNode from \"./OptionNode\";\r\nimport { SoundConfig } from \"./SoundConfig\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameUI extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    private option_panel: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    private option_prefab: cc.Prefab = null;\r\n    @property(cc.Label)\r\n    private question_lbl: cc.Label = null;\r\n    @property(cc.Sprite)\r\n    private question_img: cc.Sprite = null;\r\n    @property(cc.Node)\r\n    private jiangbei: cc.Node = null;\r\n    @property(cc.Label)\r\n    private title_lbl: cc.Label = null;\r\n    @property(cc.Label)\r\n    private curLevel_lbl: cc.Label = null;\r\n    @property(cc.Label)\r\n    private levelCount_lbl: cc.Label = null;\r\n    @property(cc.Node)\r\n    private endLayer: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    private jiangbei_prefab: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private zhadan_prefab: cc.Prefab = null;\r\n\r\n    private gameData: GameData = null;\r\n\r\n    onLoad() {\r\n        ListenerManager.on(EventType.ENTER_GAME, this.handleEnterGame, this);\r\n        ListenerManager.on(EventType.GAME_RECONNECT, this.resetUI, this);\r\n        ListenerManager.on(EventType.GAME_REPLAY, this.handleEnterGame, this);\r\n        ListenerManager.on(EventType.CLICK_OPTION, this.handleClickOption, this);\r\n        T2M.addSyncEventListener(EventType.NEXT_LEVEL, this.nextLevel.bind(this));\r\n    }\r\n\r\n    onDestroy() {\r\n        ListenerManager.off(EventType.ENTER_GAME, this.handleEnterGame, this);\r\n        ListenerManager.off(EventType.GAME_RECONNECT, this.resetUI, this);\r\n        ListenerManager.off(EventType.GAME_REPLAY, this.handleEnterGame, this);\r\n        ListenerManager.off(EventType.CLICK_OPTION, this.handleClickOption, this);\r\n        T2M.removeSyncEventListener(EventType.NEXT_LEVEL);\r\n    }\r\n\r\n    private handleEnterGame() {\r\n        this.gameData = EditorManager.editorData.GameData[SyncDataManager.getSyncData().customSyncData.curLevel];\r\n        this.initUI();\r\n    }\r\n\r\n    private initUI() {\r\n        this.gameData = EditorManager.editorData.GameData[SyncDataManager.getSyncData().customSyncData.curLevel];\r\n        UIHelp.showMask();\r\n        this.node.getChildByName(\"btn_check\").active = false;\r\n        this.node.getChildByName(\"btn_check\").opacity = 0;\r\n        this.node.getChildByName(\"btn_check\").getChildByName(\"btn_disable\").active = false;\r\n        this.jiangbei.opacity = 0;\r\n        this.jiangbei.scale = 0;\r\n        this.jiangbei.active = false;\r\n        this.node.getChildByName(\"pipi_yanwu\").active = false;\r\n        this.endLayer.active = false;\r\n\r\n        this.option_panel.removeAllChildren();\r\n        this.option_panel.destroyAllChildren();\r\n        for (let i = 0; i < this.gameData.opinion; i++) {\r\n            let option = cc.instantiate(this.option_prefab);\r\n            option.parent = this.option_panel;\r\n            option.name = \"option_\" + i;\r\n            option.getComponent(OptionNode).showInit(i);\r\n        }\r\n\r\n        let panel_width = this.gameData.opinion * 290 + (this.gameData.opinion - 1) * 30;\r\n        if (panel_width > 1800) {\r\n            this.option_panel.scale = 1800 / panel_width;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.showQuestion();\r\n            this.node.getChildByName(\"btn_check\").active = true;\r\n            this.node.getChildByName(\"btn_check\").getChildByName(\"btn_disable\").active = true;\r\n        }, 1);\r\n        cc.tween(this.node.getChildByName(\"btn_check\")).delay(1.5).to(0.5, { opacity: 255 }).call(() => {\r\n            UIHelp.closeMask();\r\n        }).start();\r\n        this.initTitle();\r\n        this.initLevelProgress();\r\n    }\r\n\r\n    private initLevelProgress() {\r\n        this.curLevel_lbl.node.parent.parent.active = EditorManager.editorData.GameData.length > 1;\r\n        this.curLevel_lbl.string = (SyncDataManager.getSyncData().customSyncData.curLevel + 1).toString();\r\n        this.levelCount_lbl.string = EditorManager.editorData.GameData.length.toString();\r\n    }\r\n\r\n    private initTitle() {\r\n        this.title_lbl.string = this.gameData.questionText;\r\n        if (this.gameData.questionText.length > 36) {\r\n            this.title_lbl.node.width = this.title_lbl.fontSize * 36;\r\n            this.title_lbl.overflow = cc.Label.Overflow.RESIZE_HEIGHT;\r\n        } else {\r\n            this.title_lbl.overflow = cc.Label.Overflow.NONE;\r\n        }\r\n        this.title_lbl.node.active = false;\r\n        this.title_lbl.string = this.gameData.questionText;\r\n        this.title_lbl.node.active = true;\r\n        this.title_lbl.node.parent.getComponent(cc.Layout).updateLayout();\r\n    }\r\n\r\n    private resetUI() {\r\n        this.initUI();\r\n        this.handleOptionState();\r\n        this.handleCheckBtnState();\r\n\r\n        if (SyncDataManager.getSyncData().frameSyncData.isGameOver) {            \r\n            for (let i = 0; i < this.option_panel.childrenCount; i++) {\r\n                let option = this.option_panel.children[i];\r\n                option.active = false;\r\n            }\r\n            for (let i = 0; i < this.node.getChildByName(\"img_wutaipingmu\").childrenCount; i++) {\r\n                let timu = this.node.getChildByName(\"img_wutaipingmu\").children[i];\r\n                timu.opacity = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    private showQuestion() {\r\n        if (this.gameData.questionPic == \"\") {\r\n            this.question_lbl.node.active = true;\r\n            this.question_img.node.active = false;\r\n            this.question_lbl.string = this.gameData.questionText;\r\n            cc.tween(this.question_lbl.node).delay(0.5).to(0.3, { opacity: 255 }).start();\r\n        } else {\r\n            this.question_lbl.node.active = false;\r\n            this.question_img.node.active = true;\r\n            cc.tween(this.question_img.node).delay(0.5).to(0.3, { opacity: 255 }).start();\r\n            cc.resources.load(\"images/\" + this.gameData.questionPic, cc.SpriteFrame, function (err, img) {\r\n                this.question_img.spriteFrame = img;\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n    private handleClickOption(data) {\r\n        let seletedOption = SyncDataManager.getSyncData().customSyncData.seletedOption;\r\n        if (seletedOption.indexOf(data) != -1) {\r\n            seletedOption.splice(seletedOption.indexOf(data), 1);\r\n        } else {\r\n            seletedOption.push(data);\r\n        }\r\n        this.handleOptionState();\r\n        this.handleCheckBtnState();\r\n    }\r\n\r\n    private handleOptionState() {\r\n        for (let i = 0; i < this.option_panel.childrenCount; i++) {\r\n            let option = this.option_panel.children[i];\r\n            option.getComponent(OptionNode).option_check.active = false;\r\n        }\r\n        for (let i = 0; i < SyncDataManager.getSyncData().customSyncData.seletedOption.length; i++) {\r\n            let option = this.option_panel.getChildByName(\"option_\" + SyncDataManager.getSyncData().customSyncData.seletedOption[i]);\r\n            option.getComponent(OptionNode).option_check.active = true;\r\n        }\r\n    }\r\n\r\n    private handleCheckBtnState() {\r\n        let btn_check = this.node.getChildByName(\"btn_check\");\r\n        let btn_mask = btn_check.getChildByName(\"btn_disable\");\r\n        btn_mask.active = SyncDataManager.getSyncData().customSyncData.seletedOption.length < 1;\r\n    }\r\n\r\n    private onClickCheckBtn() {\r\n        SoundManager.playEffect(SoundConfig.soudlist[\"点击音效\"], false, false);\r\n        UIHelp.showMask();\r\n        //判断答案是否正确\r\n        if (SyncDataManager.getSyncData().customSyncData.seletedOption.length != this.gameData.answerId.length) {\r\n            // console.log(\"答案错误\");\r\n            this.handleFalse();\r\n        } else {\r\n            let isTrue = true;\r\n            for (let i = 0; i < SyncDataManager.getSyncData().customSyncData.seletedOption.length; i++) {\r\n                if (this.gameData.answerId.indexOf(SyncDataManager.getSyncData().customSyncData.seletedOption[i] + 1) == -1) {\r\n                    isTrue = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (isTrue) {\r\n                // console.log(\"答案正确\");\r\n                this.handleTrue();\r\n            } else {\r\n                // console.log(\"答案错误\");\r\n                this.handleFalse();\r\n            }\r\n        }\r\n    }\r\n\r\n    private handleTrue() {\r\n        ListenerManager.dispatch(EventType.SUBMIT, true);\r\n        SyncDataManager.getSyncData().customSyncData.rightTimu[SyncDataManager.getSyncData().customSyncData.curLevel] = true;\r\n        for (let i = 0; i < this.node.getChildByName(\"img_wutaipingmu\").childrenCount; i++) {\r\n            let timu = this.node.getChildByName(\"img_wutaipingmu\").children[i];\r\n            cc.tween(timu).to(0.5, { opacity: 0 }).start();\r\n        }\r\n        for (let i = 0; i < this.option_panel.childrenCount; i++) {\r\n            let option = this.option_panel.children[i];\r\n            option.getComponent(OptionNode).showTrue();\r\n        }\r\n        this.jiangbei.opacity = 0;\r\n        this.jiangbei.active = true;\r\n        this.scheduleOnce(() => {\r\n            cc.tween(this.jiangbei).to(0.5, { opacity: 255, scale: 1 }).start();\r\n            SoundManager.playEffect(SoundConfig.soudlist[\"快节奏成功音效\"], false, false, false, () => {\r\n                if (NetWork.isMaster || !NetWork.isSync) {\r\n                    T2M.dispatch(EventType.NEXT_LEVEL, true)\r\n                }\r\n                // this.nextLevel();\r\n            });\r\n        }, 3);\r\n    }\r\n\r\n    private handleFalse() {\r\n        ListenerManager.dispatch(EventType.SUBMIT, false);\r\n        SyncDataManager.getSyncData().customSyncData.rightTimu[SyncDataManager.getSyncData().customSyncData.curLevel] = false;\r\n        for (let i = 0; i < this.node.getChildByName(\"img_wutaipingmu\").childrenCount; i++) {\r\n            let timu = this.node.getChildByName(\"img_wutaipingmu\").children[i];\r\n            cc.tween(timu).to(0.5, { opacity: 0 }).start();\r\n        }\r\n        for (let i = 0; i < this.option_panel.childrenCount; i++) {\r\n            let option = this.option_panel.children[i];\r\n            let isSleted = SyncDataManager.getSyncData().customSyncData.seletedOption.indexOf(i) != -1;\r\n            option.getComponent(OptionNode).showFalse(isSleted);\r\n        }\r\n        this.scheduleOnce(() => {\r\n            this.node.getChildByName(\"pipi_yanwu\").active = true;\r\n            Tools.playSpine(this.node.getChildByName(\"pipi_yanwu\").getComponent(sp.Skeleton), 'effect_smoke1', false, () => {\r\n                this.node.getChildByName(\"pipi_yanwu\").active = false;\r\n                // this.nextLevel();\r\n                if (NetWork.isMaster || !NetWork.isSync) {\r\n                    T2M.dispatch(EventType.NEXT_LEVEL, true)\r\n                }\r\n            });\r\n        }, 2.5);\r\n    }\r\n\r\n    private nextLevel() {\r\n        this.jiangbei.active = false;\r\n        for (let i = 0; i < this.option_panel.childrenCount; i++) {\r\n            let option = this.option_panel.children[i];\r\n            option.active = false;\r\n        }\r\n        if (SyncDataManager.getSyncData().customSyncData.curLevel + 1 >= EditorManager.editorData.GameData.length) {\r\n            this.handleGameOver();\r\n        } else {\r\n            SyncDataManager.getSyncData().customSyncData.curLevel++;\r\n            SyncDataManager.getSyncData().customSyncData.seletedOption = [];\r\n            this.initUI();\r\n        }\r\n    }\r\n\r\n    private handleGameOver() {\r\n        this.endLayer.active = true;\r\n        let isAllRight = true;\r\n        for (let i = 0; i < EditorManager.editorData.GameData.length; i++) {\r\n            if (SyncDataManager.getSyncData().customSyncData.rightTimu[i]) {\r\n                let jiangbei = cc.instantiate(this.jiangbei_prefab);\r\n                jiangbei.parent = this.endLayer.getChildByName(\"panel\");\r\n            } else {\r\n                let zhadan = cc.instantiate(this.zhadan_prefab);\r\n                zhadan.parent = this.endLayer.getChildByName(\"panel\");\r\n                isAllRight = false;\r\n            }\r\n        } \r\n        if (isAllRight) {\r\n            SoundManager.playEffect(SoundConfig.soudlist[\"激烈的掌声欢呼音效\"], false, false, false, () => {\r\n                ListenerManager.dispatch(EventType.GAME_OVER);\r\n            });\r\n            Tools.playSpine(this.endLayer.getChildByName(\"pipi\").getComponent(sp.Skeleton), 'pipi_happy_meidong', true);\r\n        } else {\r\n            SoundManager.playEffect(SoundConfig.soudlist[\"稀稀拉拉的掌声音效\"], false, false, false, () => {\r\n                ListenerManager.dispatch(EventType.GAME_OVER);\r\n            });\r\n            Tools.playSpine(this.endLayer.getChildByName(\"pipi\").getComponent(sp.Skeleton), 'pipi_embarrassed_meidong', true);\r\n        }        \r\n    }\r\n\r\n}\r\n"]}